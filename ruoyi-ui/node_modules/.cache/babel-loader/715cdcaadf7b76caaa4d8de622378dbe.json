{"remainingRequest":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\src\\views\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\src\\views\\login.vue","mtime":1598162196920},{"path":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:\\\\workspace\\\\IdeaProjects\\\\RuoYi-vue-github\\\\ruoyi-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _login = require(\"@/api/login\");\n\nvar _jsCookie = _interopRequireDefault(require(\"js-cookie\"));\n\nvar _jsencrypt = require(\"@/utils/jsencrypt\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: \"Login\",\n  data: function data() {\n    return {\n      codeUrl: \"\",\n      cookiePassword: \"\",\n      loginForm: {\n        username: \"admin\",\n        password: \"admin123\",\n        rememberMe: false,\n        code: \"\",\n        uuid: \"\"\n      },\n      loginRules: {\n        username: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"用户名不能为空\"\n        }],\n        password: [{\n          required: true,\n          trigger: \"blur\",\n          message: \"密码不能为空\"\n        }],\n        code: [{\n          required: true,\n          trigger: \"change\",\n          message: \"验证码不能为空\"\n        }]\n      },\n      loading: false,\n      redirect: undefined\n    };\n  },\n  watch: {\n    $route: {\n      handler: function handler(route) {\n        this.redirect = route.query && route.query.redirect;\n      },\n      immediate: true\n    }\n  },\n  created: function created() {\n    this.getCode();\n    this.getCookie();\n  },\n  methods: {\n    getCode: function getCode() {\n      var _this = this;\n\n      (0, _login.getCodeImg)().then(function (res) {\n        _this.codeUrl = \"data:image/gif;base64,\" + res.img;\n        _this.loginForm.uuid = res.uuid;\n      });\n    },\n    getCookie: function getCookie() {\n      var username = _jsCookie.default.get(\"username\");\n\n      var password = _jsCookie.default.get(\"password\");\n\n      var rememberMe = _jsCookie.default.get('rememberMe');\n\n      this.loginForm = {\n        username: username === undefined ? this.loginForm.username : username,\n        password: password === undefined ? this.loginForm.password : (0, _jsencrypt.decrypt)(password),\n        rememberMe: rememberMe === undefined ? false : Boolean(rememberMe)\n      };\n    },\n    handleLogin: function handleLogin() {\n      var _this2 = this;\n\n      this.$refs.loginForm.validate(function (valid) {\n        if (valid) {\n          _this2.loading = true;\n\n          if (_this2.loginForm.rememberMe) {\n            _jsCookie.default.set(\"username\", _this2.loginForm.username, {\n              expires: 30\n            });\n\n            _jsCookie.default.set(\"password\", (0, _jsencrypt.encrypt)(_this2.loginForm.password), {\n              expires: 30\n            });\n\n            _jsCookie.default.set('rememberMe', _this2.loginForm.rememberMe, {\n              expires: 30\n            });\n          } else {\n            _jsCookie.default.remove(\"username\");\n\n            _jsCookie.default.remove(\"password\");\n\n            _jsCookie.default.remove('rememberMe');\n          }\n\n          _this2.$store.dispatch(\"Login\", _this2.loginForm).then(function () {\n            _this2.$router.push({\n              path: _this2.redirect || \"/\"\n            });\n          }).catch(function () {\n            _this2.loading = false;\n\n            _this2.getCode();\n          });\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",null]}