{"remainingRequest":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\src\\components\\Editor\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\src\\components\\Editor\\index.vue","mtime":1598162196897},{"path":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace\\IdeaProjects\\RuoYi-vue-github\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:\\\\workspace\\\\IdeaProjects\\\\RuoYi-vue-github\\\\ruoyi-ui\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"D:\\\\workspace\\\\IdeaProjects\\\\RuoYi-vue-github\\\\ruoyi-ui\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/defineProperty\"));\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar _auth = require(\"@/utils/auth\");\n\nvar _vueQuillEditor = require(\"vue-quill-editor\");\n\nrequire(\"quill/dist/quill.core.css\");\n\nrequire(\"quill/dist/quill.snow.css\");\n\nrequire(\"quill/dist/quill.bubble.css\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// 工具栏配置\nvar toolbarOptions = [[\"bold\", \"italic\", \"underline\", \"strike\"], // 加粗 斜体 下划线 删除线\n[\"blockquote\", \"code-block\"], // 引用  代码块\n[{\n  list: \"ordered\"\n}, {\n  list: \"bullet\"\n}], // 有序、无序列表\n[{\n  indent: \"-1\"\n}, {\n  indent: \"+1\"\n}], // 缩进\n[{\n  size: [\"small\", false, \"large\", \"huge\"]\n}], // 字体大小\n[{\n  header: [1, 2, 3, 4, 5, 6, false]\n}], // 标题\n[{\n  color: []\n}, {\n  background: []\n}], // 字体颜色、字体背景颜色\n[{\n  align: []\n}], // 对齐方式\n[\"clean\"], // 清除文本格式\n[\"link\", \"image\", \"video\"] // 链接、图片、视频\n];\nvar _default = {\n  props: {\n    /* 编辑器的内容 */\n    value: {\n      type: String\n    },\n\n    /* 图片大小 */\n    maxSize: {\n      type: Number,\n      default: 4000 //kb\n\n    }\n  },\n  components: {\n    quillEditor: _vueQuillEditor.quillEditor\n  },\n  data: function data() {\n    var _editorOption, _ref;\n\n    return _ref = {\n      content: this.value,\n      uploadImgUrl: \"\",\n      editorOption: (_editorOption = {\n        placeholder: \"\",\n        theme: \"snow\"\n      }, (0, _defineProperty2.default)(_editorOption, \"placeholder\", \"请输入内容\"), (0, _defineProperty2.default)(_editorOption, \"modules\", {\n        toolbar: {\n          container: toolbarOptions,\n          handlers: {\n            image: function image(value) {\n              if (value) {\n                // 触发input框选择图片文件\n                document.querySelector(\".quill-img input\").click();\n              } else {\n                this.quill.format(\"image\", false);\n              }\n            }\n          }\n        }\n      }), _editorOption)\n    }, (0, _defineProperty2.default)(_ref, \"uploadImgUrl\", process.env.VUE_APP_BASE_API + \"/common/upload\"), (0, _defineProperty2.default)(_ref, \"headers\", {\n      Authorization: 'Bearer ' + (0, _auth.getToken)()\n    }), _ref;\n  },\n  watch: {\n    value: function value() {\n      this.content = this.value;\n    }\n  },\n  methods: {\n    onEditorBlur: function onEditorBlur() {//失去焦点事件\n    },\n    onEditorFocus: function onEditorFocus() {//获得焦点事件\n    },\n    onEditorChange: function onEditorChange() {\n      //内容改变事件\n      this.$emit(\"input\", this.content);\n    },\n    // 富文本图片上传前\n    quillImgBefore: function quillImgBefore(file) {\n      var fileType = file.type;\n\n      if (fileType === 'image/jpeg' || fileType === 'image/png') {\n        return true;\n      } else {\n        this.$message.error('请插入图片类型文件(jpg/jpeg/png)');\n        return false;\n      }\n    },\n    quillImgSuccess: function quillImgSuccess(res, file) {\n      // res为图片服务器返回的数据\n      // 获取富文本组件实例\n      var quill = this.$refs.quillEditor.quill; // 如果上传成功\n\n      if (res.code == 200) {\n        // 获取光标所在位置\n        var length = quill.getSelection().index; // 插入图片  res.url为服务器返回的图片地址\n\n        quill.insertEmbed(length, \"image\", res.url); // 调整光标到最后\n\n        quill.setSelection(length + 1);\n      } else {\n        this.$message.error(\"图片插入失败\");\n      }\n    },\n    // 富文本图片上传失败\n    uploadError: function uploadError() {\n      // loading动画消失\n      this.$message.error(\"图片插入失败\");\n    }\n  }\n};\nexports.default = _default;",null]}